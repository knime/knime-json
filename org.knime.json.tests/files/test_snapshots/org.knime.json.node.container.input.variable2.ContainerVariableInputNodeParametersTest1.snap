{
  "data" : {
    "model" : {
      "parameterName" : "variable-input",
      "useFullyQualifiedName" : false,
      "description" : "",
      "specificationMode" : "ACCEPT_ANY",
      "variableLoadMode" : "MERGE",
      "useSimpleJsonSpec" : false,
      "templateVariables" : [ ],
      "performNewValidation" : false
    }
  },
  "schema" : {
    "type" : "object",
    "properties" : {
      "model" : {
        "type" : "object",
        "properties" : {
          "description" : {
            "type" : "string",
            "title" : "Description",
            "description" : "A description for the variable input parameter. The description is shown in the API specification of the\nREST interface.\n",
            "default" : ""
          },
          "inputPathOrUrl" : {
            "type" : "string"
          },
          "loadVariables" : {
            "type" : "object",
            "title" : "Set input variables as template",
            "description" : "Loads variables (that are not global constants) at the variable inports as the new template variables. Only\nsupported types will be loaded.\n"
          },
          "parameterName" : {
            "type" : "string",
            "title" : "Parameter name",
            "description" : "A name for the variable input parameter (preferably unique). This name is exposed in the REST interface.\n",
            "default" : "variable-input"
          },
          "performNewValidation" : {
            "type" : "boolean",
            "default" : true
          },
          "specificationMode" : {
            "oneOf" : [ {
              "const" : "ACCEPT_ANY",
              "title" : "Accept any input"
            }, {
              "const" : "REQUIRE_SPECIFICATION",
              "title" : "Require input to match template variables specification"
            } ],
            "title" : "Specification mode",
            "description" : "Choose whether to accept any input or require input to match template variables specification.\n<ul>\n<li><b>Accept any input</b>: Accepts any well formed input with an arbitrary amount of variables. The input has to be an object.\nEach property (key/value) pair represents a variable. The property key defines the variable name\n(which has to be a valid name; see <i>Name</i>). The property value defines the variable value. The type\n of the variable will be determined using the JSON type of the property value. For a list of all\nsupported types see <i>Type</i>.\n</li>\n<li><b>Require input to match template variables specification</b>: <p>\nOnly accepts input with that matches the template variables specification.\nThe input has to be an object or a value with a supported type (see <i>Use simplified JSON format</i>).\n</p>\n<p>\nIf an object is required, each property (key/value) has to match exactly one of\nthe variables in the specification.\nThe property key has to match the variable name and the JSON type of the property has to\nmatch the variable type.\n</p>\n<p>\nIf <i>Use simplified JSON format</i> is enabled, a value has to be used instead of an object.\nThe type of the JSON value has to match the type defined by the only variable in the variable\nspecification.\n</p>\n</li>\n</ul>",
            "default" : "ACCEPT_ANY"
          },
          "templateVariables" : {
            "type" : "array",
            "items" : {
              "type" : "object",
              "properties" : {
                "isSimpleJsonSpec" : {
                  "type" : "boolean",
                  "default" : false
                },
                "name" : {
                  "type" : "string",
                  "title" : "Variable Name",
                  "description" : "Merges the variables from the inport and variables that are already defined in the template. If a name\nis not already defined, the variable will be appended to the end. Otherwise, the type and value of the\nmatching variable will be updated to the ones of the loaded variable.\n",
                  "default" : "variable_1"
                },
                "type" : {
                  "oneOf" : [ {
                    "const" : "STRING",
                    "title" : "String"
                  }, {
                    "const" : "INTEGER",
                    "title" : "Integer"
                  }, {
                    "const" : "LONG",
                    "title" : "Long"
                  }, {
                    "const" : "DOUBLE",
                    "title" : "Double"
                  }, {
                    "const" : "BOOLEAN",
                    "title" : "Boolean"
                  } ],
                  "title" : "Type",
                  "description" : "This is the type of the template variable to create. Depending on the type the requirements for the\nvariable value may change.\n<br />\nThe following four basic data types are supported:\n<br />\n<ul>\n    <li>\n        <i>String:</i>\n        A string of characters. This is the default if a new template variable is created.<br/>\n        The default value is an empty string.\n        <br/><br/>\n        To use this type in an external variable you have to use a JSON string.\n        <br/><br/>\n        <i>Note:</i>\n        The node will inform about a string that is empty or does only contain spaces because this\n        is probably unwanted.\n    </li>\n    <li>\n        <i>Integer:</i>\n        An integer number with possible values from 2&#179;&#185;-1 to -2&#179;&#185;. The value must be\n         a valid number (consisting only of an optional sign (&#8220;+&#8221;/&#8220;-&#8221;) and\n        &#8220;0&#8221;-&#8220;9&#8221;) and be in the range above.\n        <br />\n        If the size of your value exceeds the limits above, you can try to use a <i>Double</i> value\n        instead.\n        <br/>\n        The default value is &#8220;0&#8221;.\n        <br/>\n        <br/>\n        To use this type in an external variable you have to use a JSON number without a decimal point\n        (e.g. &#8220;123&#8221; instead of &#8220;123.0&#8221;).\n        <br/>\n        <i>Note:</i>\n        Using too many digits in the JSON causes the number to be interpreted as a Long instead\n        which is not supported by this node.\n    </li>\n    <li>\n        <i>Double:</i>\n        A floating point decimal number with possible values from around\n        4.9&#183;10&#8315;&#179;&#178;&#8308; to 1.8&#183;10&#179;&#8304;&#8312; in both the positive\n        and negative range.\n        <br />\n        The value must be a valid number (consisting only of an optional sign\n        (&#8220;+&#8221;/&#8220;-&#8221;) and &#8220;0&#8221;-&#8220;9&#8221;). You can specify an\n        exponent    by appending &#8220;e&#8221; followed by the exponent. Apart from a numeric value\n        you can also specify one of the following three (case-sensitive) special values:\n        <i>Infinity</i> for positive infinity, <i>-Infinity</i> for negative infinity and <i>NaN</i> for\n         &#8220;Not a Number&#8221;.\n        <br />\n        If the number is too big or too small, it may be converted into one of the these special values.\n        (You will be warned if this happens).\n        <br />\n        You should keep in mind that you may loose some precision for big values or values that are very\n         close to zero.\n        <br/>\n        The default value is &#8220;0.0&#8221;.\n        <br/>\n        <br/>\n        To use this type in an external variable you have to use a JSON number. Numbers with and without\n        a decimal point are supported.\n    </li>\n    <li>\n        <i>Boolean:</i>\n        A truth value that can be either &#8220;true&#8221; or &#8220;false&#8221;.<br/>\n        The default value is &#8220;false&#8221;.\n        <br/>\n        <br/>\n        To use this type in an external variable you have to use a JSON boolean.\n        <br/>\n        <br/>\n        <i>Note:</i>\n        Any other value will be interpreted as &#8220;false&#8221;.\n    </li>\n</ul>\n",
                  "default" : "STRING"
                },
                "value" : {
                  "type" : "string",
                  "title" : "Value",
                  "description" : "<p>\nThe value of the template variable. It must comply with the type-requirements as described above.\n</p>\n<p>\n<i>Note:</i>\nThis value will be used as an output if no external value is present.\n</p>\n",
                  "default" : ""
                }
              }
            },
            "title" : "Template Variables",
            "description" : "<p>\nThe value of the template variable. It must comply with the type-requirements as described above.\n</p>\n<p>\n<i>Note:</i>\nThis value will be used as an output if no external value is present.\n</p>\n",
            "default" : [ ]
          },
          "useFullyQualifiedName" : {
            "type" : "boolean",
            "title" : "Append unique ID to parameter name",
            "description" : "If checked, the name set above will be amended by the node's ID to guarantee unique parameter names. Usually\n it's a good idea to have this box <i>not</i> checked and instead make sure to use meaningful and unique\n names in all container nodes present in a workflow.\n",
            "default" : false
          },
          "useSimpleJsonSpec" : {
            "type" : "boolean",
            "title" : "Use simplified JSON format",
            "description" : "This option can only be used if exactly one variable is defined. As mentioned above this will allow\nthe external input format to be simpler by using the value directly instead of an object that defines the\nvariables as properties.\nE.g. if this option is enabled, the following format is expected in the &#8220;InputParameters&#8221;:\n<pre>\n{\n    ...\n    \"parameter-name\": &lt;value&gt;,\n    ...\n}\n</pre>\ninstead of the object notation\n<pre>\n{\n    ...\n    \"parameter-name\": {\n      \"variable-name\": &lt;value&gt;\n    },\n    ...\n}\n</pre>\n<i>Note:</i>\nIf this option is enabled, the variable will always have the same name as the parameter name without the\nunique ID appended (and thus the same naming restrictions).\n",
            "default" : false
          },
          "variableLoadMode" : {
            "oneOf" : [ {
              "const" : "REPLACE",
              "title" : "Replace"
            }, {
              "const" : "MERGE",
              "title" : "Merge"
            } ],
            "title" : "Variable loading mode",
            "description" : "Choose how to load the flow variables from the connected input.\n\n<ul>\n<li><b>Replace</b>: Replaces all variables that are already defined by the variables from the inports.\n</li>\n<li><b>Merge</b>: Merges the variables from the inport and variables that are already defined in the template. If a name\nis not already defined, the variable will be appended to the end. Otherwise, the type and value of the\nmatching variable will be updated to the ones of the loaded variable.\n</li>\n</ul>",
            "default" : "REPLACE"
          }
        }
      }
    }
  },
  "ui_schema" : {
    "elements" : [ {
      "type" : "Control",
      "scope" : "#/properties/model/properties/parameterName",
      "options" : {
        "validation" : {
          "pattern" : {
            "errorMessage" : "The field cannot be blank (it must contain at least one non-whitespace character).",
            "parameters" : {
              "pattern" : ".*\\S.*"
            }
          }
        }
      }
    }, {
      "type" : "Control",
      "scope" : "#/properties/model/properties/useFullyQualifiedName",
      "options" : {
        "format" : "checkbox"
      }
    }, {
      "type" : "Control",
      "scope" : "#/properties/model/properties/description",
      "options" : {
        "rows" : 3,
        "format" : "textArea"
      }
    }, {
      "type" : "Control",
      "scope" : "#/properties/model/properties/specificationMode",
      "options" : {
        "format" : "radio",
        "radioLayout" : "vertical"
      }
    }, {
      "label" : "Template Variables",
      "type" : "Section",
      "rule" : {
        "effect" : "SHOW",
        "condition" : {
          "scope" : "#/properties/model/properties/specificationMode",
          "schema" : {
            "oneOf" : [ {
              "const" : "REQUIRE_SPECIFICATION"
            } ]
          }
        }
      },
      "elements" : [ {
        "type" : "Control",
        "scope" : "#/properties/model/properties/variableLoadMode",
        "options" : {
          "format" : "valueSwitch"
        },
        "rule" : {
          "effect" : "SHOW",
          "condition" : {
            "type" : "AND",
            "conditions" : [ {
              "scope" : "#/properties/model/properties/specificationMode",
              "schema" : {
                "oneOf" : [ {
                  "const" : "REQUIRE_SPECIFICATION"
                } ]
              }
            }, {
              "schema" : { }
            } ]
          }
        }
      }, {
        "type" : "Control",
        "scope" : "#/properties/model/properties/loadVariables",
        "options" : {
          "format" : "simpleButton",
          "triggerId" : "org.knime.json.node.container.input.variable2.ContainerVariableInputNodeParameters$LoadVariablesButtonRef"
        },
        "rule" : {
          "effect" : "SHOW",
          "condition" : {
            "type" : "AND",
            "conditions" : [ {
              "scope" : "#/properties/model/properties/specificationMode",
              "schema" : {
                "oneOf" : [ {
                  "const" : "REQUIRE_SPECIFICATION"
                } ]
              }
            }, {
              "schema" : { }
            } ]
          }
        }
      }, {
        "type" : "Control",
        "scope" : "#/properties/model/properties/useSimpleJsonSpec",
        "options" : {
          "format" : "checkbox"
        },
        "rule" : {
          "effect" : "ENABLE",
          "condition" : {
            "type" : "AND",
            "conditions" : [ {
              "scope" : "#/properties/model/properties/specificationMode",
              "schema" : {
                "oneOf" : [ {
                  "const" : "REQUIRE_SPECIFICATION"
                } ]
              }
            }, {
              "type" : "AND",
              "conditions" : [ {
                "scope" : "#/properties/model/properties/templateVariables",
                "schema" : {
                  "not" : {
                    "minItems" : 2
                  }
                }
              }, {
                "scope" : "#/properties/model/properties/templateVariables",
                "schema" : {
                  "contains" : { }
                }
              } ]
            } ]
          }
        }
      }, {
        "type" : "Control",
        "scope" : "#/properties/model/properties/templateVariables",
        "options" : {
          "detail" : [ {
            "type" : "HorizontalLayout",
            "elements" : [ {
              "type" : "Control",
              "scope" : "#/properties/name",
              "providedOptions" : [ "validation.pattern" ],
              "rule" : {
                "effect" : "DISABLE",
                "condition" : {
                  "scope" : "#/properties/isSimpleJsonSpec",
                  "schema" : {
                    "const" : true
                  }
                }
              }
            }, {
              "type" : "Control",
              "scope" : "#/properties/type",
              "options" : {
                "format" : "dropDown"
              },
              "providedOptions" : [ "possibleValues" ]
            } ]
          }, {
            "type" : "Control",
            "scope" : "#/properties/value"
          } ],
          "addButtonText" : "Add variable",
          "arrayElementTitle" : "Variable"
        },
        "providedOptions" : [ "elementDefaultValue" ],
        "rule" : {
          "effect" : "SHOW",
          "condition" : {
            "scope" : "#/properties/model/properties/specificationMode",
            "schema" : {
              "oneOf" : [ {
                "const" : "REQUIRE_SPECIFICATION"
              } ]
            }
          }
        }
      } ]
    } ]
  },
  "persist" : {
    "type" : "object",
    "properties" : {
      "model" : {
        "type" : "object",
        "properties" : {
          "parameterName" : {
            "configKey" : "parameterName"
          },
          "useFullyQualifiedName" : {
            "configKey" : "useFullyQualifiedName"
          },
          "description" : {
            "configKey" : "description"
          },
          "specificationMode" : {
            "configPaths" : [ [ "requireSpecification" ] ]
          },
          "variableLoadMode" : {
            "configPaths" : [ [ "mergeVariables" ] ]
          },
          "loadVariables" : { },
          "useSimpleJsonSpec" : {
            "configKey" : "useSimpleJsonSpec"
          },
          "templateVariables" : {
            "type" : "array",
            "items" : {
              "type" : "object",
              "properties" : {
                "isSimpleJsonSpec" : {
                  "route" : [ "..", ".." ],
                  "configPaths" : [ ]
                },
                "name" : {
                  "route" : [ "..", ".." ],
                  "configPaths" : [ [ "names" ] ]
                },
                "type" : {
                  "route" : [ "..", ".." ],
                  "configPaths" : [ [ "types" ] ]
                },
                "value" : {
                  "route" : [ "..", ".." ],
                  "configPaths" : [ [ "values" ] ]
                }
              }
            },
            "route" : [ "variables" ]
          },
          "inputPathOrUrl" : {
            "configKey" : "inputPathOrUrl"
          },
          "performNewValidation" : {
            "deprecatedConfigKeys" : [ {
              "deprecated" : [ ]
            } ]
          }
        }
      }
    }
  },
  "initialUpdates" : [ {
    "scope" : "#/properties/model/properties/performNewValidation",
    "values" : [ {
      "indices" : [ ],
      "value" : true
    } ]
  }, {
    "scope" : "#/properties/model/properties/templateVariables/items/properties/type",
    "providedOptionName" : "possibleValues",
    "values" : [ {
      "indices" : [ ],
      "value" : [ {
        "id" : "STRING",
        "text" : "String"
      }, {
        "id" : "INTEGER",
        "text" : "Integer"
      }, {
        "id" : "DOUBLE",
        "text" : "Double"
      }, {
        "id" : "BOOLEAN",
        "text" : "Boolean"
      } ]
    } ]
  } ],
  "globalUpdates" : [ {
    "trigger" : {
      "id" : "org.knime.json.node.container.input.variable2.ContainerVariableInputNodeParameters$LoadVariablesButtonRef"
    },
    "dependencies" : [ "#/properties/model/properties/templateVariables", "#/properties/model/properties/variableLoadMode" ]
  }, {
    "trigger" : {
      "scope" : "#/properties/model/properties/parameterName"
    },
    "dependencies" : [ "#/properties/model/properties/parameterName", "#/properties/model/properties/templateVariables/items/properties/name", "#/properties/model/properties/useSimpleJsonSpec" ]
  }, {
    "trigger" : {
      "scope" : "#/properties/model/properties/templateVariables"
    },
    "dependencies" : [ "#/properties/model/properties/templateVariables", "#/properties/model/properties/templateVariables/items/properties/name", "#/properties/model/properties/useSimpleJsonSpec" ]
  }, {
    "trigger" : {
      "scope" : "#/properties/model/properties/useSimpleJsonSpec"
    },
    "dependencies" : [ "#/properties/model/properties/parameterName", "#/properties/model/properties/templateVariables", "#/properties/model/properties/templateVariables/items/properties/isSimpleJsonSpec", "#/properties/model/properties/templateVariables/items/properties/name", "#/properties/model/properties/useSimpleJsonSpec" ]
  } ]
}